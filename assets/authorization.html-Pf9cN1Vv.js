import{_ as o,r as i,o as r,c,a as e,b as t,d as n,e as s}from"./app-wfQWMRoZ.js";const l="/assets/oauth-authorization-a-XyefF0.png",p={},d=s('<h1 id="authorization" tabindex="-1"><a class="header-anchor" href="#authorization" aria-hidden="true">#</a> Authorization</h1><h2 id="what-is-oauth2" tabindex="-1"><a class="header-anchor" href="#what-is-oauth2" aria-hidden="true">#</a> What is OAuth2?</h2><p>It is a standard protocol for allowing users to sign in to applications without requiring users to enter their credentials. Many platforms like Google, Facebook, and GitHub use OAuth2.</p><h3 id="terminology" tabindex="-1"><a class="header-anchor" href="#terminology" aria-hidden="true">#</a> Terminology</h3><ul><li><strong>Client</strong>: The application that is requesting access to a user&#39;s data.</li><li><strong>Authorization Code</strong>: A code that is used to obtain an access token.</li><li><strong>Access Token</strong>: A user token that grants the application access to a user&#39;s data.</li><li><strong>App Access Token</strong>: A machine-to-machine app access token that is used to access the application&#39;s API.</li><li><strong>Refresh Token</strong>: A token that is used to obtain a new access token when the current one expires.</li><li><strong>Scope</strong>: The level of access that the application is requesting.</li><li><strong>Redirect URI</strong>: The URI that the application should redirect to after the user grants or denies access.</li></ul><h2 id="client-registration" tabindex="-1"><a class="header-anchor" href="#client-registration" aria-hidden="true">#</a> Client Registration</h2>',6),h={href:"https://forms.gle/4miiLAksbFTEGg3c6",target:"_blank",rel:"noopener noreferrer"},u=s('<ul><li>Your application&#39;s name</li><li>Your application&#39;s website</li><li>Your application&#39;s description</li><li>Your application&#39;s logo</li><li>Your application&#39;s privacy policy</li><li>Your application&#39;s terms of service</li><li>Your application&#39;s redirect URI</li></ul><h2 id="types-of-tokens" tabindex="-1"><a class="header-anchor" href="#types-of-tokens" aria-hidden="true">#</a> Types of Tokens</h2><p>We currently support two types of tokens:</p><table><thead><tr><th>Token Type</th><th>Description</th></tr></thead><tbody><tr><td>User Access Token</td><td>An access token that grants the application access to a user&#39;s data. You can use this token to access the user&#39;s data.</td></tr><tr><td>App Access Token</td><td>An access token that grants the application access to the application&#39;s API. Mostly intended for machine-to-machine communication.</td></tr></tbody></table><p>User Access Tokens and App Access Tokens are both bearer tokens. Bearer tokens are used to authenticate the application.</p><h2 id="authorization-code-flow" tabindex="-1"><a class="header-anchor" href="#authorization-code-flow" aria-hidden="true">#</a> Authorization Code Flow</h2><h3 id="authorization-code-flow-overview" tabindex="-1"><a class="header-anchor" href="#authorization-code-flow-overview" aria-hidden="true">#</a> Authorization Code Flow Overview</h3><ol><li>The client sends a request to the authorization server asking for an authorization code.</li><li>The authorization server authenticates the client and issues an authorization code.</li><li>The client redirects the user back to the application with the authorization code.</li><li>The application exchanges the authorization code for an access token.</li></ol><h3 id="authorization-code-flow-example" tabindex="-1"><a class="header-anchor" href="#authorization-code-flow-example" aria-hidden="true">#</a> Authorization Code Flow Example</h3>',9),g={href:"https://console.dev.own3d.tv/resources/passport-clients",target:"_blank",rel:"noopener noreferrer"},k={class:"custom-container tip"},m=e("p",{class:"custom-container-title"},"TIP",-1),v={href:"https://console.dev.own3d.tv/resources/passport-clients",target:"_blank",rel:"noopener noreferrer"},f=e("strong",null,"Client authentication failed",-1),b=s(`<div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token comment">// Redirect the user to the authorization server</span>
window<span class="token punctuation">.</span>location<span class="token punctuation">.</span>href <span class="token operator">=</span> <span class="token string">&quot;https://id.stream.tv/oauth/authorize?client_id=&lt;&gt;&amp;redirect_uri=&lt;&gt;&amp;response_type=code&amp;scope=&lt;&gt;&quot;</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><p>The user will then be redirected to the application with the authorization code in the URL. From there, the user must click on the &quot;Authorize&quot; button to grant the application access to the user&#39;s data:</p><div style="text-align:center;"><img src="`+l+`" alt="Authorization Code Flow" style="border:1px solid #181e23;border-radius:8px;"></div><p>After that we use php to get the access token from the authorization server.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Get the authorization code from the URL</span>
<span class="token variable">$code</span> <span class="token operator">=</span> <span class="token variable">$_GET</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;code&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Exchange the authorization code for an access token using laravel http facades</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>Http</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;https://id.stream.tv/oauth/token&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;client_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;client_secret&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;redirect_uri&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;code&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$code</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;grant_type&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;authorization_code&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the access token from the response</span>
<span class="token variable">$access_token</span> <span class="token operator">=</span> <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;access_token&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),w={href:"https://github.com/own3d/id",target:"_blank",rel:"noopener noreferrer"},_=s(`<h2 id="refresh-tokens" tabindex="-1"><a class="header-anchor" href="#refresh-tokens" aria-hidden="true">#</a> Refresh Tokens</h2><p>Refresh tokens are used to obtain a new access token when the current one expires. With the following example, we will use the refresh token flow to get a new access token.</p><div class="language-php line-numbers-mode" data-ext="php"><pre class="language-php"><code><span class="token comment">// Get the refresh token from the response</span>
<span class="token variable">$refresh_token</span> <span class="token operator">=</span> <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;refresh_token&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token comment">// Exchange the refresh token for a new access token</span>
<span class="token variable">$response</span> <span class="token operator">=</span> <span class="token class-name class-name-fully-qualified static-context"><span class="token punctuation">\\</span>Http</span><span class="token operator">::</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;https://id.stream.tv/oauth/token&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
    <span class="token string single-quoted-string">&#39;client_id&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;client_secret&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;redirect_uri&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;&lt;&gt;&#39;</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;refresh_token&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$refresh_token</span><span class="token punctuation">,</span>
    <span class="token string single-quoted-string">&#39;grant_type&#39;</span> <span class="token operator">=&gt;</span> <span class="token string single-quoted-string">&#39;refresh_token&#39;</span><span class="token punctuation">,</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Get the access token from the response</span>
<span class="token variable">$access_token</span> <span class="token operator">=</span> <span class="token variable">$response</span><span class="token operator">-&gt;</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;access_token&#39;</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="token-expiration" tabindex="-1"><a class="header-anchor" href="#token-expiration" aria-hidden="true">#</a> Token Expiration</h2><p>Typically, the <code>/oauth/token</code> endpoint will return a <code>expires_in</code> field that indicates the number of seconds until the token expires.</p><p>By default, access tokens expire after 15 days and refresh tokens after 30 days. This means after expiration of the access token, you will need to use the refresh token within 15 days to get a new access token. If you don&#39;t use the refresh token within 30 days, the user will be required to re-authenticate.</p><p>Personal access tokens having a lifetime of 6 months. These tokens cannot be refreshed automatically.</p><h2 id="scopes" tabindex="-1"><a class="header-anchor" href="#scopes" aria-hidden="true">#</a> Scopes</h2><p>With Scope, you can specify the level of access that the application is requesting. We currently support the following scopes:</p><table><thead><tr><th>Scope</th><th>Description</th></tr></thead><tbody><tr><td><code>academy:read</code></td><td>Allows the application to read academy data.</td></tr><tr><td><code>academy:manage</code></td><td>Allows the application to manage academy data.</td></tr><tr><td><code>alerts:manage</code></td><td>Allows the application to manage alerts.</td></tr><tr><td><code>affiliate:manage</code></td><td>Allows the application to manage affiliate links.</td></tr><tr><td><code>analytics:read</code></td><td>Allows the application to read analytics data.</td></tr><tr><td><code>chatbot:read</code></td><td>Allows the application to read chatbot data.</td></tr><tr><td><code>chatbot:manage</code></td><td>Allows the application to manage chatbot data.</td></tr><tr><td><code>chatbot:manage:commands</code></td><td>Allows the application to manage chatbot commands.</td></tr><tr><td><code>chatbot:manage:moderation</code></td><td>Allows the application to manage chatbot moderation.</td></tr><tr><td><code>chatbot:manage:timers</code></td><td>Allows the application to manage chatbot timers.</td></tr><tr><td><code>chatbot:manage:giveaways</code></td><td>Allows the application to manage chatbot giveaways.</td></tr><tr><td><code>connections</code></td><td>Allows the application to manage social media connections.</td></tr><tr><td><code>donations:read</code></td><td>Allows the application to read donations data.</td></tr><tr><td><code>donations:manage</code></td><td>Allows the application to manage donations data.</td></tr><tr><td><code>entitlements:read</code></td><td>Allows the application to read entitlements data aka. purchased products.</td></tr><tr><td><code>extensions:read</code></td><td>Allows the application to read extensions data.</td></tr><tr><td><code>extensions:manage</code></td><td>Allows the application to manage extensions data, like changing configuration.</td></tr><tr><td><code>linkspree:manage</code></td><td>Allows the application to manage linkspree links.</td></tr><tr><td><code>orders:manage</code></td><td>Allows the application to manage orders data.</td></tr><tr><td><code>subscription:read</code></td><td>Allows the application to read subscription data.</td></tr><tr><td><code>user:read</code></td><td>Allows the application to read user data.</td></tr><tr><td><code>user:manage</code></td><td>Allows the application to manage user data.</td></tr><tr><td><code>user:manage:credentials</code></td><td>Allows the application to manage user credentials.</td></tr><tr><td><code>widgets:manage</code></td><td>Allows the application to manage widgets data.</td></tr></tbody></table>`,10),y={href:"https://github.com/own3d/id/blob/master/src/Enums/Scope.php",target:"_blank",rel:"noopener noreferrer"};function A(x,q){const a=i("ExternalLinkIcon");return r(),c("div",null,[d,e("p",null,[t("To getting started, with our API's, you need to request a client id and client secret. You can do this by fill out the "),e("a",h,[t("OAuth2 Client Registration"),n(a)]),t(" form with the following information:")]),u,e("p",null,[t("In the following example, we will use the authorization code flow to get an access token. To visualize the flow, we will use javascript to redirect the user to the authorization server. You will find your client id in the "),e("a",g,[t("Passport Client"),n(a)]),t(" section of the OWN3D Developer Console.")]),e("div",k,[m,e("p",null,[t("Ensure that you have added the redirect URI to your "),e("a",v,[t("Passport Client"),n(a)]),t(' in the OWN3D Developer Console. Otherwise, the authorization server will throw a "'),f,t('" error.')])]),b,e("p",null,[t("If you are familiar with laravel, you may want to check our "),e("a",w,[t("own3d/id"),n(a)]),t(" package. It is a laravel package that provides a simple way to work with our API's.")]),_,e("p",null,[t("You will also find all scopes in our "),e("a",y,[t("Scope"),n(a)]),t(" Enum in GitHub.")])])}const T=o(p,[["render",A],["__file","authorization.html.vue"]]);export{T as default};
