import{_ as d,r as i,o as r,c as u,a as n,b as a,d as e,w as s,e as c}from"./app-wfQWMRoZ.js";const h={},k={id:"extension-helper",tabindex:"-1"},m=n("a",{class:"header-anchor",href:"#extension-helper","aria-hidden":"true"},"#",-1),g=n("p",null,"This document describes the extension helper, a piece of software that runs within the extension iframe. It provides a set of functions to communicate with the extension supervisor.",-1),x={href:"https://www.ietf.org/rfc/rfc2119.txt",target:"_blank",rel:"noopener noreferrer"},f=n("h2",{id:"table-of-contents",tabindex:"-1"},[n("a",{class:"header-anchor",href:"#table-of-contents","aria-hidden":"true"},"#"),a(" Table of Contents")],-1),b={class:"table-of-contents"},v=c(`<h2 id="terminology" tabindex="-1"><a class="header-anchor" href="#terminology" aria-hidden="true">#</a> Terminology</h2><ul><li><strong>Extension</strong>: A piece of software that can be installed on OWN3D to add functionality.</li><li><strong>ext-types</strong>: A set of typescript definitions for the extension helper.</li><li><strong>Extension Helper</strong>: A piece of software run within the extension iframe that provides a set of functions communicate with the supervisor.</li><li><strong>Extension Supervisor</strong>: A piece of software acting as a bridge between the extension and the OWN3D platform.</li></ul><h2 id="how-this-helper-works" tabindex="-1"><a class="header-anchor" href="#how-this-helper-works" aria-hidden="true">#</a> How this helper works</h2><p>The extension helper is a piece of software that runs within the extension iframe. It provides a set of functions to communicate with the extension supervisor. The supervisor is within the OWN3D platform and acts as a bridge between the extension and the platform.</p><h2 id="use-the-extension-helper-within-your-extension" tabindex="-1"><a class="header-anchor" href="#use-the-extension-helper-within-your-extension" aria-hidden="true">#</a> Use the extension helper within your extension</h2><ol><li>Install the package for typed definitions</li></ol><div class="language-bash line-numbers-mode" data-ext="sh"><pre class="language-bash"><code><span class="token function">yarn</span> <span class="token function">add</span> own3d/ext-types
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><ol start="2"><li>Add the extension helper script to your extension</li></ol><blockquote><p>This script MUST be added as the first script before any other scripts to pass the review.</p></blockquote><div class="language-html line-numbers-mode" data-ext="html"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation attr-equals">=</span><span class="token punctuation">&quot;</span>https://extension-files.ext-own3d.tv/latest/own3d-ext.js<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token script"></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="3"><li>Use the extension helper</li></ol><div class="language-vue line-numbers-mode" data-ext="vue"><pre class="language-vue"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span><span class="token punctuation">&gt;</span></span><span class="token script"><span class="token language-javascript">
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Running </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>version<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> on </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>environment<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>

  <span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span><span class="token function">onAuthorized</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onAuthorized&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span><span class="token function">onContext</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> changed</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> changed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Context changed </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>

  <span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;remote-config&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Config changed&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">&gt;</span></span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="api" tabindex="-1"><a class="header-anchor" href="#api" aria-hidden="true">#</a> API</h2><h3 id="own3d-ext" tabindex="-1"><a class="header-anchor" href="#own3d-ext" aria-hidden="true">#</a> <code>OWN3D.ext</code></h3><h4 id="own3d-ext-version" tabindex="-1"><a class="header-anchor" href="#own3d-ext-version" aria-hidden="true">#</a> <code>OWN3D.ext.version</code></h4><p>Returns the version of the extension helper.</p><h4 id="own3d-ext-environment" tabindex="-1"><a class="header-anchor" href="#own3d-ext-environment" aria-hidden="true">#</a> <code>OWN3D.ext.environment</code></h4><p>Returns the environment of the extension helper. Possible values are <code>production</code> and <code>development</code>.</p><h4 id="own3d-ext-context" tabindex="-1"><a class="header-anchor" href="#own3d-ext-context" aria-hidden="true">#</a> <code>OWN3D.ext.context</code></h4><p>The context superglobal provides information about the context in which the extension is running.</p><p>This may change during the lifecycle of the extension. Any change to the context is communicated to the extension via the <a href="#own3d-ext-oncontext-callback"><code>OWN3D.ext.onContext(callback)</code></a> event.</p><h4 id="own3d-ext-user" tabindex="-1"><a class="header-anchor" href="#own3d-ext-user" aria-hidden="true">#</a> <code>OWN3D.ext.user</code></h4><p>The user superglobal provides information about the user who interacts with the extension.</p><p>See <a href="#own3d-ext-onauthorized-callback"><code>OWN3D.ext.onAuthorized(callback)</code></a> for a list of properties.</p><h4 id="own3d-ext-onauthorized-callback" tabindex="-1"><a class="header-anchor" href="#own3d-ext-onauthorized-callback" aria-hidden="true">#</a> <code>OWN3D.ext.onAuthorized(callback)</code></h4><p>Registers a callback that is called when the extension is authorized.</p><h5 id="parameters" tabindex="-1"><a class="header-anchor" href="#parameters" aria-hidden="true">#</a> Parameters</h5><ul><li><code>callback</code> - A function that is called when the extension is authorized.</li></ul><p>The callback receives an object with the following properties:</p>`,29),w=n("thead",null,[n("tr",null,[n("th",null,"Parameter"),n("th",null,"Type"),n("th",null,"Description")])],-1),_=n("tr",null,[n("td",null,[n("code",null,"client_id")]),n("td",null,[n("code",null,"string")]),n("td",null,"The client id of the extension.")],-1),y=n("td",null,[n("code",null,"client_token")],-1),T=n("td",null,[n("code",null,"string")],-1),N=n("tr",null,[n("td",null,[n("code",null,"channel_id")]),n("td",null,[n("code",null,"object")]),n("td",null,"The user id of the channel where the extension is installed.")],-1),O=n("tr",null,[n("td",null,[n("code",null,"user_id")]),n("td",null,[n("code",null,"object")]),n("td",null,"The user id of the user who interacts with the extension.")],-1),D=n("tr",null,[n("td",null,[n("code",null,"scopes")]),n("td",null,[n("code",null,"object")]),n("td",null,"The scopes of the user who interacts with the extension.")],-1),W=n("tr",null,[n("td",null,[n("code",null,"token")]),n("td",null,[n("code",null,"object")]),n("td",null,"JWT token that should be used for any Extension Backend request.")],-1),j=c(`<h5 id="example" tabindex="-1"><a class="header-anchor" href="#example" aria-hidden="true">#</a> Example</h5><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>You MUST register this callback only once. By registering this callback, the helper will wait for the extension to be authorized before executing the callback. On any subsequent authorization, the callback will be called again.</p></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span><span class="token function">onAuthorized</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;onAuthorized&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="own3d-ext-oncontext-callback" tabindex="-1"><a class="header-anchor" href="#own3d-ext-oncontext-callback" aria-hidden="true">#</a> <code>OWN3D.ext.onContext(callback)</code></h4><p>Registers a callback that is called when the context is updated.</p><h5 id="parameters-1" tabindex="-1"><a class="header-anchor" href="#parameters-1" aria-hidden="true">#</a> Parameters</h5><ul><li><code>callback</code> - A function that is called when the context is updated.</li></ul><h5 id="example-1" tabindex="-1"><a class="header-anchor" href="#example-1" aria-hidden="true">#</a> Example</h5><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>The context provided in the callback parameters MAY be partial and only contain the changed keys. To get a full context, you should use the <code>OWN3D.ext.context</code> superglobal. This callback MAY not be called for the initial context, so you should always use the <code>OWN3D.ext.context</code> superglobal for the initial context.</p></div><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span><span class="token function">onContext</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">context<span class="token punctuation">,</span> changed</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">const</span> key <span class="token keyword">of</span> changed<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">\`</span><span class="token string">Context changed </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">\${</span>context<span class="token punctuation">[</span>key<span class="token punctuation">]</span><span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">\`</span></span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="own3d-ext-coins" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins" aria-hidden="true">#</a> <code>OWN3D.ext.coins</code></h3><p>The coins module provides a set of functions to exchange coins for products. Coins are a digital good that can be purchased by users. Products are a set of items that can be exchanged for coins.</p><p><strong>Products</strong></p><p>Products are defined in the Developer Console. Products have a sku, a name, a cost. The cost is defined in coins. The cost is the amount of coins that are required to exchange for the product.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>sku</td><td><code>string</code></td><td>The sku of the product.</td></tr><tr><td>name</td><td><code>string</code></td><td>The name of the product.</td></tr><tr><td>cost</td><td><code>Cost</code></td><td>The cost of the product.</td></tr><tr><td>cost.amount</td><td><code>number</code></td><td>The amount of coins that are required to exchange for the product.</td></tr><tr><td>cost.type</td><td><code>string</code></td><td>The type of the cost. Can be <code>coins</code>.</td></tr><tr><td>environment</td><td><code>string</code></td><td>The environment of the product. Can be <code>production</code> or <code>sandbox</code>.</td></tr></tbody></table><p><strong>Transactions</strong></p><p>A transaction is a record of an exchange of coins for a product.</p><table><thead><tr><th>Property</th><th>Type</th><th>Description</th></tr></thead><tbody><tr><td>id</td><td><code>string</code></td><td>The id of the transaction.</td></tr><tr><td>client_id</td><td><code>string</code></td><td>The id of the client.</td></tr><tr><td>user_id</td><td><code>string</code></td><td>The id of the user.</td></tr><tr><td>channel_id</td><td><code>string</code></td><td>The id of the channel.</td></tr><tr><td>subscription</td><td><code>Subscription</code></td><td>The subscription that was exchanged for coins.</td></tr><tr><td>product</td><td><code>Product</code></td><td>The product that was exchanged for coins.</td></tr><tr><td>product.sku</td><td><code>string</code></td><td>The sku of the product.</td></tr><tr><td>product.name</td><td><code>string</code></td><td>The name of the product.</td></tr><tr><td>product.cost</td><td><code>Cost</code></td><td>The cost of the product.</td></tr><tr><td>product.cost.amount</td><td><code>number</code></td><td>The amount of coins that are required to exchange for the product.</td></tr><tr><td>product.cost.type</td><td><code>string</code></td><td>The type of the cost. Can be <code>coins</code>.</td></tr><tr><td>product.environment</td><td><code>string</code></td><td>The environment of the product. Can be <code>production</code> or <code>sandbox</code>.</td></tr><tr><td>product.recurrence</td><td><code>string</code></td><td>The recurrence of the product. Can be <code>one-time</code> or <code>weekly</code>, <code>monthly</code> or <code>yearly</code>.</td></tr><tr><td>metadata</td><td><code>Metadata</code></td><td>The key-value map of metadata that was sent with the transaction.</td></tr><tr><td>status</td><td><code>string</code></td><td>The status of the transaction. Can be <code>pending</code>, <code>completed</code>, <code>cancelled</code> or <code>failed</code>.</td></tr></tbody></table><h4 id="own3d-ext-coins-getproducts" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins-getproducts" aria-hidden="true">#</a> <code>OWN3D.ext.coins.getProducts()</code></h4><p>Returns a list of products available for exchange.</p><h5 id="example-2" tabindex="-1"><a class="header-anchor" href="#example-2" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>coins<span class="token punctuation">.</span><span class="token function">getProducts</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">products</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Got products&#39;</span><span class="token punctuation">,</span> products<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="own3d-ext-coins-showcoinsbalance" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins-showcoinsbalance" aria-hidden="true">#</a> <code>OWN3D.ext.coins.showCoinsBalance()</code></h4><p>Shows the current coins balance.</p><h5 id="example-3" tabindex="-1"><a class="header-anchor" href="#example-3" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>coins<span class="token punctuation">.</span><span class="token function">showCoinsBalance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="own3d-ext-coins-usecoins-sku-metadata" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins-usecoins-sku-metadata" aria-hidden="true">#</a> <code>OWN3D.ext.coins.useCoins(sku, metadata)</code></h4><p>Exchange coins for a product.</p><h5 id="parameters-2" tabindex="-1"><a class="header-anchor" href="#parameters-2" aria-hidden="true">#</a> Parameters</h5><ul><li><code>sku</code> - The sku of the product to exchange coins for.</li><li><code>metadata</code> - The metadata to send with the transaction.</li></ul><h5 id="example-4" tabindex="-1"><a class="header-anchor" href="#example-4" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>coins<span class="token punctuation">.</span><span class="token function">useCoins</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="own3d-ext-coins-ontransactioncomplete-callback" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins-ontransactioncomplete-callback" aria-hidden="true">#</a> <code>OWN3D.ext.coins.onTransactionComplete(callback)</code></h4><p>Registers a callback that is called when a transaction is completed.</p><h5 id="parameters-3" tabindex="-1"><a class="header-anchor" href="#parameters-3" aria-hidden="true">#</a> Parameters</h5><ul><li><code>callback</code> - A function that is called when a transaction is completed.</li></ul><h5 id="example-5" tabindex="-1"><a class="header-anchor" href="#example-5" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>coins<span class="token punctuation">.</span><span class="token function">onTransactionComplete</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Transaction completed&#39;</span><span class="token punctuation">,</span> transaction<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="own3d-ext-coins-ontransactioncancelled-callback" tabindex="-1"><a class="header-anchor" href="#own3d-ext-coins-ontransactioncancelled-callback" aria-hidden="true">#</a> <code>OWN3D.ext.coins.onTransactionCancelled(callback)</code></h4><p>Registers a callback that is called when a transaction is cancelled.</p><h5 id="parameters-4" tabindex="-1"><a class="header-anchor" href="#parameters-4" aria-hidden="true">#</a> Parameters</h5><ul><li><code>callback</code> - A function that is called when a transaction is cancelled.</li></ul><h5 id="example-6" tabindex="-1"><a class="header-anchor" href="#example-6" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>coins<span class="token punctuation">.</span><span class="token function">onTransactionCancelled</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">transaction</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Transaction cancelled&#39;</span><span class="token punctuation">,</span> transaction<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="own3d-ext-socket" tabindex="-1"><a class="header-anchor" href="#own3d-ext-socket" aria-hidden="true">#</a> <code>OWN3D.ext.socket</code></h3><p>The socket module is an event emitter. It provides a set of functions, so you can listen to events from our event bus.</p><h4 id="own3d-ext-socket-on-event-callback" tabindex="-1"><a class="header-anchor" href="#own3d-ext-socket-on-event-callback" aria-hidden="true">#</a> <code>OWN3D.ext.socket.on(event, callback)</code></h4><h5 id="example-7" tabindex="-1"><a class="header-anchor" href="#example-7" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>socket<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;remote-config&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Config changed&#39;</span><span class="token punctuation">,</span> data<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="own3d-ext-ipc" tabindex="-1"><a class="header-anchor" href="#own3d-ext-ipc" aria-hidden="true">#</a> <code>OWN3D.ext.ipc</code></h3><p>The ipc module is an event emitter. It provides a set of functions, so you can send messages from the extension to the supervisor and vice versa.</p><p><strong>IPC Channels</strong></p><p>In extensions, processes communicate by passing messages through developer-defined &quot;channels&quot; with the ipc module. These channels are <strong>arbitrary</strong> (you can name them whatever you want, but we recommend using something that describes the channel&#39;s purpose) and <strong>bidirectional</strong> (you can use the same channel name for both sides).</p><p><strong>Understanding context-isolated processes</strong></p><p>The extension helper runs in a context-isolated process. This means that the extension helper is running in a separate process than the supervisor. The supervisor is running in the OWN3D platform. The extension helper and the supervisor communicate with each other via the ipc module.</p><ul><li>Extensions cannot directly access the DOM of the OWN3D platform.</li><li>Extensions cannot access cookies or local storage of the OWN3D platform.</li><li>Extensions cannot access the user session of the OWN3D platform without the user&#39;s consent.</li></ul><p><strong>Channels</strong></p><p>Here is a list of channels that are available (OBS -&gt; Browser Source Widget)</p><ul><li><code>obs:scene-changed</code>: Gets callbacks when the scene changes in OBS</li><li><code>obs:source-visible-changed</code>: Gets callbacks when the visibility of the browser source changes in OBS</li><li><code>obs:source-active-changed</code>: Gets callbacks when the active/inactive state of the browser source changes in OBS</li></ul><p>Some internal channels are also available (ONW3D Pro -&gt; Alerts Engine):</p><ul><li><code>browser-source:ping</code>: Pings the browser source</li><li><code>browser-source:queue-activity</code>: Queues an activity (activity: object)</li><li><code>browser-source:update-config</code>: Updates the configuration (config: object)</li><li><code>browser-source:interrupt-activity</code>: Interrupts an activity</li><li><code>browser-source:loop-activity</code>: Loops an activity (loop: boolean)</li><li><code>browser-source:preview-mode</code>: Sets the preview mode (preview: boolean)</li></ul><h4 id="own3d-ext-ipc-send-channel-payload" tabindex="-1"><a class="header-anchor" href="#own3d-ext-ipc-send-channel-payload" aria-hidden="true">#</a> <code>OWN3D.ext.ipc.send(channel, payload)</code></h4><p>Sends a message to the supervisor.</p><h5 id="parameters-5" tabindex="-1"><a class="header-anchor" href="#parameters-5" aria-hidden="true">#</a> Parameters</h5><ul><li><code>channel</code> - The channel to send the message to.</li><li><code>payload</code> - The payload to send.</li></ul><h5 id="example-8" tabindex="-1"><a class="header-anchor" href="#example-8" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>ipc<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div><h4 id="own3d-ext-ipc-on-channel-listener" tabindex="-1"><a class="header-anchor" href="#own3d-ext-ipc-on-channel-listener" aria-hidden="true">#</a> <code>OWN3D.ext.ipc.on(channel, listener)</code></h4><p>Registers a listener for a channel.</p><h5 id="parameters-6" tabindex="-1"><a class="header-anchor" href="#parameters-6" aria-hidden="true">#</a> Parameters</h5><ul><li><code>channel</code> - The channel to listen to.</li><li><code>listener</code> - A function that is called when a message is received.</li></ul><h5 id="example-9" tabindex="-1"><a class="header-anchor" href="#example-9" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>ipc<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">payload</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Got test message&#39;</span><span class="token punctuation">,</span> payload<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,73),C={id:"own3d-ext-config",tabindex:"-1"},E=n("a",{class:"header-anchor",href:"#own3d-ext-config","aria-hidden":"true"},"#",-1),A=n("code",null,"OWN3D.ext.config",-1),P=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"WARNING"),n("p",null,[n("strong",null,"Do not store sensitive data in the Remote Config!"),a(" The Remote Config is not encrypted and can be accessed by anyone who interacts with the extension.")])],-1),S={id:"own3d-ext-config-getsegments-promise-configsegments",tabindex:"-1"},R=n("a",{class:"header-anchor",href:"#own3d-ext-config-getsegments-promise-configsegments","aria-hidden":"true"},"#",-1),I=n("code",null,"OWN3D.ext.config.getSegments(): Promise<ConfigSegments>",-1),q=c(`<p>Get all segments.</p><h5 id="example-10" tabindex="-1"><a class="header-anchor" href="#example-10" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">getSegments</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">segments</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Segments&#39;</span><span class="token punctuation">,</span> segments<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,3),B={id:"own3d-ext-config-setsegment-segment-content-promise-void",tabindex:"-1"},z=n("a",{class:"header-anchor",href:"#own3d-ext-config-setsegment-segment-content-promise-void","aria-hidden":"true"},"#",-1),U=n("code",null,"OWN3D.ext.config.setSegment(segment, content): Promise<void>",-1),L=c(`<p>Set the value of a key.</p><h5 id="parameters-7" tabindex="-1"><a class="header-anchor" href="#parameters-7" aria-hidden="true">#</a> Parameters</h5><ul><li><code>segment</code> - The segment to set the value of.</li><li><code>content</code> - The content to set (object).</li></ul><h5 id="example-11" tabindex="-1"><a class="header-anchor" href="#example-11" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>config<span class="token punctuation">.</span><span class="token function">setSegment</span><span class="token punctuation">(</span><span class="token string">&#39;test&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> <span class="token literal-property property">foo</span><span class="token operator">:</span> <span class="token string">&#39;bar&#39;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div></div></div>`,5),M={id:"own3d-ext-features",tabindex:"-1"},G=n("a",{class:"header-anchor",href:"#own3d-ext-features","aria-hidden":"true"},"#",-1),H=n("code",null,"OWN3D.ext.features",-1),F=n("div",{class:"custom-container warning"},[n("p",{class:"custom-container-title"},"WARNING"),n("p",null,[a("The "),n("code",null,"OWN3D.ext.features"),a(" module is currently not supported in the public beta.")])],-1),V=n("p",null,"The feature-flag namespace provides information about the current global feature flags.",-1),Y={id:"own3d-ext-features-isenabled-feature-string",tabindex:"-1"},$=n("a",{class:"header-anchor",href:"#own3d-ext-features-isenabled-feature-string","aria-hidden":"true"},"#",-1),J=n("code",null,"OWN3D.ext.features.isEnabled(feature: string)",-1),Q=c(`<p>Returns whether the current feature flag is enabled.</p><h5 id="parameters-8" tabindex="-1"><a class="header-anchor" href="#parameters-8" aria-hidden="true">#</a> Parameters</h5><ul><li><code>feature</code> - The feature to check.</li></ul><h5 id="example-12" tabindex="-1"><a class="header-anchor" href="#example-12" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code><span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">isEnabled</span><span class="token punctuation">(</span><span class="token string">&#39;feature-flag&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Feature flag is enabled&#39;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div>`,5),K={id:"own3d-ext-features-getfeatures",tabindex:"-1"},X=n("a",{class:"header-anchor",href:"#own3d-ext-features-getfeatures","aria-hidden":"true"},"#",-1),Z=n("code",null,"OWN3D.ext.features.getFeatures()",-1),nn=c(`<p>Returns a list of all available feature flags.</p><h5 id="example-13" tabindex="-1"><a class="header-anchor" href="#example-13" aria-hidden="true">#</a> Example</h5><div class="language-javascript line-numbers-mode" data-ext="js"><pre class="language-javascript"><code>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;Features&#39;</span><span class="token punctuation">,</span> <span class="token constant">OWN3D</span><span class="token punctuation">.</span>ext<span class="token punctuation">.</span>features<span class="token punctuation">.</span><span class="token function">getFeatures</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
<span class="token comment">// Features [ &#39;feature-flag&#39; ]</span>
</code></pre><div class="line-numbers" aria-hidden="true"><div class="line-number"></div><div class="line-number"></div></div></div>`,3);function an(en,sn){const o=i("Badge"),l=i("ExternalLinkIcon"),t=i("router-link"),p=i("RouterLink");return r(),u("div",null,[n("h1",k,[m,a(" Extension Helper "),e(o,{text:"public beta",type:"warning"})]),g,n("p",null,[a('The key words "MUST", "MUST NOT", "REQUIRED", "SHALL", "SHALL NOT", "SHOULD", "SHOULD NOT", "RECOMMENDED", "MAY", and "OPTIONAL" in this document are to be interpreted as described in '),n("a",x,[a("RFC 2119"),e(l)]),a(".")]),f,n("nav",b,[n("ul",null,[n("li",null,[e(t,{to:"#table-of-contents"},{default:s(()=>[a("Table of Contents")]),_:1})]),n("li",null,[e(t,{to:"#terminology"},{default:s(()=>[a("Terminology")]),_:1})]),n("li",null,[e(t,{to:"#how-this-helper-works"},{default:s(()=>[a("How this helper works")]),_:1})]),n("li",null,[e(t,{to:"#use-the-extension-helper-within-your-extension"},{default:s(()=>[a("Use the extension helper within your extension")]),_:1})]),n("li",null,[e(t,{to:"#api"},{default:s(()=>[a("API")]),_:1}),n("ul",null,[n("li",null,[e(t,{to:"#own3d-ext"},{default:s(()=>[a("OWN3D.ext")]),_:1})]),n("li",null,[e(t,{to:"#own3d-ext-coins"},{default:s(()=>[a("OWN3D.ext.coins")]),_:1})]),n("li",null,[e(t,{to:"#own3d-ext-socket"},{default:s(()=>[a("OWN3D.ext.socket")]),_:1})]),n("li",null,[e(t,{to:"#own3d-ext-ipc"},{default:s(()=>[a("OWN3D.ext.ipc")]),_:1})]),n("li",null,[e(t,{to:"#own3d-ext-config"},{default:s(()=>[a("OWN3D.ext.config "),e(o,{text:"public beta",type:"warning"})]),_:1})]),n("li",null,[e(t,{to:"#own3d-ext-features"},{default:s(()=>[a("OWN3D.ext.features "),e(o,{text:"closed beta",type:"warning"})]),_:1})])])])])]),v,n("table",null,[w,n("tbody",null,[_,n("tr",null,[y,T,n("td",null,[a("JWT token that can be used for OWN3D API requests. "),e(p,{to:"/docs/extensions/tokens-and-client-tokens.html"},{default:s(()=>[a("Usage of Extension Client Tokens")]),_:1})])]),N,O,D,W])]),j,n("h3",C,[E,a(),A,a(),e(o,{text:"public beta",type:"warning"})]),P,n("p",null,[a("The config namespace allows streamers and developers to store and retrieve data. To learn more about the Remote Config Service, see the "),e(p,{to:"/docs/extensions/remote-config.html"},{default:s(()=>[a("Remote Config")]),_:1}),a(" documentation.")]),n("h4",S,[R,a(),I,a(),e(o,{text:"public beta",type:"warning"})]),q,n("h4",B,[z,a(),U,a(),e(o,{text:"public beta",type:"warning"})]),L,n("h3",M,[G,a(),H,a(),e(o,{text:"closed beta",type:"warning"})]),F,V,n("h4",Y,[$,a(),J,a(),e(o,{text:"closed beta",type:"warning"})]),Q,n("h4",K,[X,a(),Z,a(),e(o,{text:"closed beta",type:"warning"})]),nn])}const on=d(h,[["render",an],["__file","extension-helper.html.vue"]]);export{on as default};
